tosca_definitions_version: tosca_2_0

metadata:
  template_name: Generic_20_Apps_Optimization
  description: "Template gerado para 20 aplicações genéricas com recursos variados"

imports:
  - profiles/cna-k8s.profile.yaml

service_template:
  node_templates:

    # --- App 01 ---
    app-01:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: &gen_finops
          application: "generic-workload"
          team: "research-team"
          environment: "test"
          cost_center: "GEN-001"
          managed_via: "tosca-milp"
        containers:
          - name: main
            image: "generic/app-01:latest"
            resources: { cpu_min: "150m", mem_min: "256Mi" }
        scalability:
          default_instances: 3

    # --- App 02 ---
    app-02:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-02:latest"
            resources: { cpu_min: "800m", mem_min: "1024Mi" }
        scalability:
          default_instances: 3

    # --- App 03 ---
    app-03:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-03:latest"
            resources: { cpu_min: "400m", mem_min: "1024Mi" }
        scalability:
          default_instances: 2

    # --- App 04 ---
    app-04:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-04:latest"
            resources: { cpu_min: "1000m", mem_min: "2048Mi" }
        scalability:
          default_instances: 3

    # --- App 05 ---
    app-05:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-05:latest"
            resources: { cpu_min: "300m", mem_min: "512Mi" }
        scalability:
          default_instances: 2

    # --- App 06 ---
    app-06:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-06:latest"
            resources: { cpu_min: "300m", mem_min: "512Mi" }
        scalability:
          default_instances: 2

    # --- App 07 ---
    app-07:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-07:latest"
            resources: { cpu_min: "150m", mem_min: "256Mi" }
        scalability:
          default_instances: 2

    # --- App 08 ---
    app-08:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: strict # Alta carga geralmente exige strict
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-08:latest"
            resources: { cpu_min: "1500m", mem_min: "4096Mi" }
        scalability:
          default_instances: 3

    # --- App 09 ---
    app-09:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: strict
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-09:latest"
            resources: { cpu_min: "1200m", mem_min: "4096Mi" }
        scalability:
          default_instances: 3

    # --- App 10 ---
    app-10:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-10:latest"
            resources: { cpu_min: "300m", mem_min: "512Mi" }
        scalability:
          default_instances: 2

    # --- App 11 ---
    app-11:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-11:latest"
            resources: { cpu_min: "450m", mem_min: "1024Mi" }
        scalability:
          default_instances: 2

    # --- App 12 ---
    app-12:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-12:latest"
            resources: { cpu_min: "920m", mem_min: "2048Mi" }
        scalability:
          default_instances: 3

    # --- App 13 ---
    app-13:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-13:latest"
            resources: { cpu_min: "1100m", mem_min: "2048Mi" }
        scalability:
          default_instances: 1

    # --- App 14 ---
    app-14:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-14:latest"
            resources: { cpu_min: "250m", mem_min: "512Mi" }
        scalability:
          default_instances: 3

    # --- App 15 ---
    app-15:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-15:latest"
            resources: { cpu_min: "600m", mem_min: "1024Mi" }
        scalability:
          default_instances: 2

    # --- App 16 ---
    app-16:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-16:latest"
            resources: { cpu_min: "750m", mem_min: "512Mi" }
        scalability:
          default_instances: 2

    # --- App 17 ---
    app-17:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: strict
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-17:latest"
            resources: { cpu_min: "1300m", mem_min: "4096Mi" }
        scalability:
          default_instances: 3

    # --- App 18 ---
    app-18:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-18:latest"
            resources: { cpu_min: "200m", mem_min: "256Mi" }
        scalability:
          default_instances: 2

    # --- App 19 ---
    app-19:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-19:latest"
            resources: { cpu_min: "500m", mem_min: "1024Mi" }
        scalability:
          default_instances: 1

    # --- App 20 ---
    app-20:
      type: cloud_native.nodes.Service
      properties:
        scheduling_mode: flexible
        finops: *gen_finops
        containers:
          - name: main
            image: "generic/app-20:latest"
            resources: { cpu_min: "850m", mem_min: "2048Mi" }
        scalability:
          default_instances: 3

policies:
  - global_carbon:
      type: cloud_native.policies.Sustainability
      properties:
        max_total_carbon_footprint: 250
